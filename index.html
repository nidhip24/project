<!DOCTYPE html>
<html>
    <head>
      
        <!--Import Google Icon Font-->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!--Import materialize.css-->
        <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
        <link type="text/css" rel="stylesheet" href="css/mi.css"/>

        <!--Let browser know website is optimized for mobile-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <style>
            html, body, .block {
                height: 100%;
            }
            nav ul li a:hover, nav ul li a.active {
                background-color: rgba(0,0,0,.10);
            }
            footer {
                padding-left: 0;
            }
    </style>
    </head>

    <body>
        <div class="spinner-wrapper">
            <div class="spinner">
                <div class="rect1"></div>
                <div class="rect2"></div>
                <div class="rect3"></div>
                <div class="rect4"></div>
                <div class="rect5"></div>
            </div>
        </div>
        <!----------------------Navigation Bar------------------------------>
        <div class="navbar-fixed">
            <nav class="nav-color z-depth-5 black">
                <div class="container nav-wrapper">
                    <a href="#!" class="brand-logo"><i class="material-icons" style="font-size: 40px">directions_car</i>Car Becho</a>
                    <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
                    <ul class="right hide-on-med-and-down" id="nav-list">
                        <li data-target="loginModal" class="modal-trigger" id="loginModal-id"><a href="#"><i class="material-icons right">tag_faces</i>Login/Register</a></li>
                        <li data-target="dropdown1" class="dropdown-trigger" id="user-id"><a id="userl" href="#"><i class="material-icons right">person</i></a></li>
                        <li data-target="choose-city" class="modal-trigger" id="city-id"><a href="#"><i class="material-icons right">my_location</i>choose city</a></li>
                    </ul>
                </div>
            </nav>
        </div>
        <ul class="sidenav" id="mobile-demo">
            <li data-target="loginModal" class="modal-trigger" id="loginModal-id"><a href="#"><i class="material-icons right">tag_faces</i>Login/Register</a></li>
            <li data-target="choose-city" class="modal-trigger" id="city-id"><a href="#"><i class="material-icons right">my_location</i>choose city</a></li>
        </ul>
        <!-- Dropdown Structure -->
        <ul id='dropdown1' class='dropdown-content'>
            <li><a href="profile.php">My profile</a></li>
            <li><a href="#!" onclick="logout()">Logout</a></li>
        </ul>
        <!----------------------Login Modal-------------------------------->
        <div id="loginModal" class="modal" id="login-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="row col-row" style="height: 440px" id="log-content">
                        <div class="col s5 col-log white-text" id="modal-log-content">
                            <h5>Login</h5>
                            <p>Get access to your Orders, Wishlists and Recommendations</p>
                        </div>
                        <div class="col s7">
                            <div class="row row-log-fields">
                                <form class="col s12" id="login-form" method="post" action="php/login.php">
                                    <div class="input-field col s12">
                                        <input id="username" type="text" class="validate" name="username" required>
                                        <label for="username">Username</label>
                                    </div>
                                    <div class="input-field col s12">
                                        <input id="password" type="password" class="validate" name="password" required>
                                        <label for="password">Password</label>
                                    </div>
                                    <div class="input-field col s12">
                                        <button class="btn waves-effect waves-light orange" style="width: 100%">Submit</button>
                                    </div>
                                    <div class="input-field col s12">
                                        <a class="waves-effect waves-light white blue-text btn" style="width: 100%" id="register">New to site? Sign up</a>
                                    </div>
                                </form>
                            </div>  
                        </div>
                    </div>
                    <!-------register------------>
                    <div class="row col-row" style="height: 450px" id="reg-content">
                        <div class="col s5 col-log white-text" id="modal-log-content">
                            <h5>Signup</h5>
                            <p>We don not share your personal details with anyone.</p>
                            <a class="white-text" style="font-size: 10px"><p id="aluser">Already a user?Click here!</p></a>
                        </div>
                        <div class="col s7">
                            <div class="row row-log-fields">
                                <form class="col s12" id="register-form" method="post" action="php/register.php">
                                    <div class="input-field col s12">
                                        <input id="uname" type="text" class="validate" name="uname">
                                        <label for="uname">Username</label>
                                    </div>
                                    <div class="input-field col s12">
                                        <input id="pass" type="password" class="validate" name="pass">
                                        <label for="pass">Password</label>
                                    </div>
                                    <div class="input-field col s12">
                                        <input id="name" type="text" class="validate" name="name">
                                        <label for="name">Name</label>
                                    </div>
                                    <div class="input-field col s12">
                                        <input id="email" type="email" class="validate" name="email">
                                        <label for="email">Email</label>
                                    </div>
                                    <div class="input-field col s12">
                                        <button class="btn waves-effect waves-light orange" type="submit" name="action" style="width: 100%">Submit</button>
                                    </div>
                                </form>
                            </div>  
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!----------------------Citymodal--------------------------------------->
        <div id="choose-city" class="modal">
            <div class="modal-content">
                <div class="row city-cards">
                    <div class="col s3" value="mumbai" id="city1">
                        <div class="card-panel black" style="margin-top: 20px;margin-left: 40px">
                            <span class="white-text">Mumbai</span>
                        </div>
                    </div>
                    <div class="col s3" value="mumbai" id="city1">
                        <div class="card-panel black" style="margin-top: 20px;margin-left: 20px">
                            <span class="white-text">Chennai</span>
                        </div>
                    </div>
                    <div class="col s3" value="mumbai" id="city1">
                        <div class="card-panel black" style="margin-top: 20px;margin-left: 20px">
                            <span class="white-text">Kolkata</span>
                        </div>
                    </div>
                    <div class="col s3" value="mumbai" id="city1">
                        <div class="card-panel black" style="margin-top: 20px;margin-left: 20px">
                            <span class="white-text">Delhi</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!----------------------Parallax Container------------------------------>
        <div class="parallax-container">
            <div class="parallax">
                <img class="parallax-img" src="img/back3.jpg" >
            </div>
        </div>
        <div class="section nav-color black">
            <div class="row container">
                <h2 class="header white-text">Sell and buy car</h2>
                <p class="grey-text text-darken-3 lighten-3">
Selling your vehicle through online system can be the easiest and the most profitable option. The process of its work is almost same as that of the traditional medium, and you will never become confused. However, the most important point is that there are many websites that will allow you to sell your car online for free. Thus, you can post your advertisement without investing any money. But the time it takes to sell a car privately ranges from a few hours to never. It is because of the countless factors which influence the decision making process. However, if you start out with right price and expectations then it becomes easier for you to sell your car. Internet is thus the most user-friendly option that can give you the best car selling experience.</p>

            </div>
        </div>
        <div class="parallax-container">
            <div class="parallax"><img class="parallax-img" src="img/back3.jpg"></div>
        </div>
        
        <!--------------------------Footer------------------------------------>
        <footer class="page-footer black">
            <div class="container">
                <div class="row">
                    <div class="col l6 s12">
                        <h5 class="white-text">Brands</h5>
                        <p class="grey-text text-lighten-4">Volvo</p>
                        <p class="grey-text text-lighten-4">Volkswagen</p>
                        <p class="grey-text text-lighten-4">Maruti Suzuki</p>
                    </div>
                    <div class="col l4 offset-l2 s12">
                        <h5 class="white-text">Links</h5>
                        <ul>
                            <li><a class="grey-text text-lighten-3" href="#!">About us</a></li>
                            <li><a class="grey-text text-lighten-3" href="#!">Terms and conditions</a></li>
                            <li><a class="grey-text text-lighten-3" href="#!">Privacy Policy</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-copyright">
                <div class="container">
                    © 2019 Copyright Text
                    <a class="grey-text text-lighten-4 right" href="#!"></a>
                </div>
            </div>
        </footer>
        
        <!--JavaScript at end of body for optimized loading-->
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.js"></script>
        <script type="text/javascript" src="js/materialize.min.js"></script>
        <script type="text/javascript" src="js/mi.js"></script>
        <script type="text/javascript" src="js/jquery.cookie.js"></script>
        <script>
            function search(){
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        //document.getElementById("demo").innerHTML = this.responseText;
                        console.log("hi"+this.responseText);
                    }
                };
                xhttp.open("GET", "search.php?q=", true);
                xhttp.send();
            }
            function logout(){
                $.removeCookie('username', { path: '/' });
                $("#user-id").hide();
                $("#loginModal-id").show();
                console.log("logged out");
            }
            $(document).ready(function() {
                console.log("username : "+ $.cookie("username"));
                if (document.cookie.indexOf('username') == -1 ) {
                    console.log("empty");
                    $("#user-id").hide();
                }else{
                    $("#loginModal-id").hide();
                    $("#user-id").show();
                    $("#userl").prepend($.cookie("username"));
                }

                //Preloader
                $(window).on("load", function() {
                    preloaderFadeOutTime = 1000;
                    function hidePreloader() {
                        var preloader = $('.spinner-wrapper');
                        preloader.fadeOut(preloaderFadeOutTime);
                    }
                    hidePreloader();
                });
                $('#login-form').submit(function (e) {
                    e.preventDefault();

                    $.ajax({
                        type: $('#login-form').attr('method'),
                        url: $('#login-form').attr('action'),
                        data: $('#login-form').serialize(),
                        success: function (data) {
                            //console.log('Submission was successful.');
                            //console.log(data);
                            if(data==="found"){
                                alert("logged in");
                                $("#loginModal-id").hide();
                                $("#user-id").show();
                                $("#userl").prepend($.cookie("username"));
                                $('.modal').modal().close();
                            }else{
                                alert("Invalid username or passwords");
                            }
                        },
                        error: function (data) {
                            console.log('An error occurred.');
                            console.log(data);
                        },
                    });
                });
                $('#register-form').submit(function (e) {
                    e.preventDefault();

                    $.ajax({
                        type: $('#register-form').attr('method'),
                        url: $('#register-form').attr('action'),
                        data: $('#register-form').serialize(),
                        success: function (data) {
                            //console.log('Submission was successful.');
                            //console.log(data);
                            if(data==="done"){
                                alert("login to continue");
                                $('#reg-content').hide();
                                $('#log-content').show();
                            }else{
                                alert("Try again later...!");
                            }
                        },
                        error: function (data) {
                            console.log('An error occurred.');
                            console.log(data);
                        },
                    });
                });
            });

        </script>
    </body>
</html>